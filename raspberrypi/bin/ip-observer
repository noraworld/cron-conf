#!/bin/sh

# My Raspberry Pi suddenly loses its IP address for some reason periodically (maybe once a month?)
# This script restores its IP address automatically if it loses

if [ "$(ip route show)" = "" ]; then
  netplan apply

  [ -e /home/$NON_ROOT_USER/.log ] || sudo -u $NON_ROOT_USER mkdir /home/$NON_ROOT_USER/.log
  sudo -u $NON_ROOT_USER sh -c "date >> /home/$NON_ROOT_USER/.log/ip-observer"
fi
