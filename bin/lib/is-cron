#!/bin/bash

pid=$$
while [ $pid -ne 1 ] ; do
    ppid=`awk '{print $4}' /proc/$pid/stat`
    pp_name=`awk '{print $2}' /proc/$ppid/stat`
    echo "pid=$pid, ppid=$ppid $pp_name"
    if [ "$pp_name" = "(crond)" ] ; then
        echo "This process is executed by cron."
        exit 0
    fi
    pid=$ppid
done

echo "This process is NOT executed by cron."
exit 1
